

<loginWindow>:
    pwd : pwd
    canvas.before:
        Color:
            rgba: 88, 28, 28, 0.1
        Rectangle:
            pos:self.pos 
            size:self.size            
    FloatLayout:
        size: root.width, root.height
        
        Label:
            markup: True
            text: "[b]StrongDMX512 GUI App[/b]"
            size_hint : 0.5, 0.05
            pos_hint : {"x" : 0.25, "top" : 0.75}

        TextInput:
            id : pwd
            multiline :False
            size_hint : 0.5, 0.03
            password: True
            pos_hint : {"x" : 0.25, "top" : 0.70}
        Button:
            text : "Login"
            size_hint : 0.5, 0.05
            pos_hint : {"x" : 0.25, "top" : 0.65}
            on_release: 
                root.validate()
                root.manager.transition.direction = "up"
        Image: 
            source: "res/img/escudo.png"
            size_hint : 0.4, 0.4
            pos_hint : {"x" : 0.30, "top" : 0.55}

# GUI for pop up window
<P>:
    Label:
        text : "Please enter valid information"
        size_hint : 0.5, 0.5
        pos_hint : {"x" : 0.25, "top" : 0.8}



<ImgButton@Button>:
    my_state: 0
    background_normal: "res/img/circle_green_none.png"
    background_down: "res/img/circle_green_none.png"
    size_hint_y: None
    height: self.width

    on_release: app.change_button(self)

<StopRearmButton@Button>:
    my_state: 0
    background_normal: ''
    height: self.width
    background_color: app.button_stop_color
    text: "STOP"
    on_release: app.change_stop_rearm_button(self)


<mainWindow>:
    BoxLayout: 
        orientation: 'vertical'
        TabbedPanel:
            id: tp
            do_default_tab: False
            TabbedPanelItem:
                id: tab_commands
                text: 'Control'
                GridLayout:
                    cols: 1
                    rows: 2
                    spacing_vertical: 0.2
                    GridLayout: 
                        background_color: (0.1,0,0,1)
                        cols: 3
                        rows: 2
                        BoxLayout: 
                            padding: 50
                            orientation: "vertical"
                            ImgButton: 
                                id: button_1
                            Label: 
                                text: "1"
                        BoxLayout: 
                            padding: 50
                            orientation: "vertical"
                            ImgButton: 
                                id: button_2
                            Label: 
                                text: "2"
                        BoxLayout: 
                            padding: 50
                            orientation: "vertical"
                            ImgButton: 
                                id: button_3
                            Label: 
                                text: "3"

                    GridLayout:
                        cols: 2
                        rows: 1
                        size_hint : 0.5, 0.3
                        padding: 50
                        spacing: 10
                        StopRearmButton: 
                            id: stop_rearm_button
                        Button: 
                            id: go_button
                            background_color: (0.0, 1.0, 0.0, 1.0)
                            text: "GO"
                            on_press: app.start_sending_commands()
                            on_release: app.stop_sending_commands()

            TabbedPanelItem:
                id: tab_settings
                text: 'Settings'
                
                FloatLayout:
                    id: tab_settings
                    GridLayout: 
                        padding: 10
                        rows: 4
                        cols: 1
                        BoxLayout: 
                            height: "40dp"
                            size_hint_y: None
                            Label: 
                                halign: 'right'
                                text: "Configure Server Settings"
                                                
                        BoxLayout: 
                            height: "40dp"
                            size_hint_y: None
                            Label: 
                                text: "Server IP"
                            TextInput:
                                size_hint_x: 5
                                text: app.server_ip
                                id: server_ip

                        BoxLayout: 
                            height: "40dp"
                            size_hint_y: None
                            Label: 
                                text: "Server Port"
                            TextInput:
                                size_hint_x: 5
                                text: app.server_port
                                id: server_port
                        BoxLayout: 
                            padding: 20
                            size_hint_y: None
                            Button: 
                                text: "Apply"
                                on_release: app.apply_settings(server_ip, server_port)

            TabbedPanelItem:
                id: tab_about
                text: 'About'
                
                FloatLayout:
                    id: tab_about
                    Label: 
                        valign: "middle"
                        halign: "center"
                        markup: True
                        text: "[b]StrongDMX512 GUI App[/b]\n\n(C) Juan M. Casillas 2026\n\n[u][ref=hlink]Github repository[/ref][/u]"
                        on_ref_press: 
                            import webbrowser
                            webbrowser.open('https://github.com/juanmcasillas/strongdmx512')